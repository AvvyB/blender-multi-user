# Multi-User v0.8.1 - Release Notes

## Bug Fix Release with Diagnostics Tool

**Release Date**: January 12, 2025
**Package**: `multi_user-0.8.1.zip` (8.9 MB)

---

## ğŸ¯ Purpose

This release addresses the server errors you encountered:
- `_pickle.UnpicklingError: invalid load key`
- `EOFError: Ran out of input`
- `ValueError: too many values to unpack`

These errors are typically caused by **version mismatches** between connected clients or **network issues**.

---

## ğŸ†• What's New

### 1. Diagnostics Tool

A new built-in diagnostics popup that shows:

- âœ… **Addon Version** - Your Multi-User version
- âœ… **Replication Library Version** - Core library (should be 0.9.10)
- âœ… **Python Version** - Python version in Blender
- âœ… **Blender Version** - Your Blender version
- âœ… **Connection Status** - Whether connected to server
- âœ… **Online Users** - List of all connected users
- âœ… **Dependencies** - Status of ZeroMQ, DeepDiff, OrderlySet

### 2. How to Use Diagnostics

1. Connect to server (or attempt to)
2. Press `N` to open sidebar
3. Click **Multi-User** tab
4. Click **"Diagnostics"** button (below Disconnect button)
5. Review the popup information

### 3. Troubleshooting Guide

New comprehensive guide covering:
- Version mismatch resolution
- Network connectivity issues
- Server debugging
- Client debugging
- Pre-flight checklist
- Common error solutions

**File**: `TROUBLESHOOTING.md`

---

## ğŸ”§ Fixing Your Current Server Errors

### Quick Diagnosis

Run diagnostics on **ALL connected clients** and check:

1. **Do all clients show the same addon version?**
   - âŒ If NO â†’ This is likely your issue
   - âœ… If YES â†’ Proceed to network checks

2. **Do all clients show "Replication Library: 0.9.10"?**
   - âŒ If NO or "Not found" â†’ Reinstall that client's addon
   - âœ… If YES â†’ Good

3. **Are all dependencies green checkmarks?**
   - âŒ If NO â†’ Reinstall affected client's addon
   - âœ… If YES â†’ Good

### Solution Steps

#### If Version Mismatch Detected

1. **Coordinate with team** - All disconnect from server
2. **Uninstall old versions** on all clients:
   - Edit â†’ Preferences â†’ Extensions
   - Find "Multi-User" â†’ Remove
3. **Restart Blender** on all clients
4. **Install v0.8.1** on all clients:
   - Download `multi_user-0.8.1.zip`
   - Extensions â†’ Install from Disk
5. **Verify with diagnostics** - Run on each client
6. **Restart server**:
   ```bash
   docker-compose restart
   ```
7. **Reconnect clients one at a time**
8. **Monitor server logs**:
   ```bash
   docker-compose logs -f
   ```

#### If Network Issues Detected

1. **Increase timeout** in server `.env`:
   ```bash
   TIMEOUT=30000
   ```
2. **Restart server**:
   ```bash
   docker-compose restart
   ```
3. **Test connectivity**:
   ```bash
   ping your-server-ip.com
   telnet your-server-ip.com 5555
   ```
4. **Check firewall** allows ports 5555-5557

---

## ğŸ“‹ All Features Included

v0.8.1 includes **all v0.8.0 features**:

- âœ… Change tracking system (git blame-like)
- âœ… Collaborative undo/redo
- âœ… Task management with assignments
- âœ… Team chat with code snippets
- âœ… Multi-scene support
- âœ… Enhanced keyframe sync
- âœ… Auto-update notifications
- âœ… **NEW: Diagnostics tool**

---

## ğŸ“¦ Installation

### For New Users

1. Download `multi_user-0.8.1.zip`
2. Open Blender 4.3+
3. Edit â†’ Preferences â†’ Extensions
4. Click dropdown â†’ Install from Disk
5. Select `multi_user-0.8.1.zip`
6. Enable "Multi-User" extension
7. Configure server settings
8. Connect!

### For Existing Users (Upgrading from v0.8.0)

1. **Disconnect** from server
2. Edit â†’ Preferences â†’ Extensions
3. Find "Multi-User" â†’ **Remove**
4. **Restart Blender**
5. Extensions â†’ **Install from Disk**
6. Select `multi_user-0.8.1.zip`
7. **Run Diagnostics** to verify
8. Reconnect to server

**Important**: All team members should upgrade at the same time to avoid version mismatches.

---

## ğŸ–¥ï¸ Server Compatibility

**No server changes required!**

The existing server (replication 0.9.10) works perfectly with v0.8.1 clients.

However, it's recommended to restart the server when all clients upgrade:

```bash
cd server/
docker-compose restart
```

---

## ğŸ“Š File Changes

### New Files
- `multi_user/diagnostics.py` - Diagnostics operator
- `TROUBLESHOOTING.md` - Comprehensive troubleshooting guide
- `v0.8.1_RELEASE_NOTES.md` - This file

### Modified Files
- `multi_user/__init__.py` - Added diagnostics module
- `multi_user/ui.py` - Added diagnostics button
- `multi_user/blender_manifest.toml` - Updated version to 0.8.1
- `version.json` - Updated version and changelog
- `DEPLOYMENT_STATUS.md` - Updated for v0.8.1

### Package
- `multi_user-0.8.1.zip` - Built and ready (8.9 MB)

---

## ğŸ” Using the Diagnostics Tool

### When to Use

- Before reporting issues
- After installing/upgrading
- When connection issues occur
- When troubleshooting errors
- To verify all team members have matching versions

### What to Check

**Green indicators** = Good âœ…
- All dependencies installed
- Correct versions
- Everything working

**Red indicators** = Problem âŒ
- Missing dependencies â†’ Reinstall
- Version mismatch â†’ Coordinate upgrade
- Connection failed â†’ Check server

### Sharing Diagnostics

When asking for help, share:
1. Screenshot of diagnostics popup
2. Server logs (last 50 lines)
3. Error messages from Blender console

---

## ğŸ†˜ Getting Help

### Step 1: Run Diagnostics
- Use the diagnostics tool on ALL clients
- Note any red indicators

### Step 2: Check Troubleshooting Guide
- Read `TROUBLESHOOTING.md`
- Follow relevant solution steps

### Step 3: Check Server Logs
```bash
docker-compose logs -f
```
Look for ERROR or WARNING messages

### Step 4: Report Issue
Include:
- Diagnostics results from all clients
- Server logs (last 50 lines)
- Steps to reproduce
- Error messages

---

## âœ… Success Criteria

You know v0.8.1 is working when:

- âœ… Diagnostics shows all green checkmarks
- âœ… All users appear in online users list
- âœ… No errors in server logs
- âœ… Changes sync instantly
- âœ… Chat messages appear immediately
- âœ… Tasks sync across all users

---

## ğŸ¯ Next Steps

1. **Upgrade all clients** to v0.8.1
2. **Run diagnostics** on each client
3. **Verify versions match** across all clients
4. **Restart server** (optional but recommended)
5. **Test connection** with 2 clients first
6. **Monitor logs** for errors
7. **Report any issues** with diagnostics data

---

## ğŸ“š Documentation

- **[TROUBLESHOOTING.md](TROUBLESHOOTING.md)** - Complete troubleshooting guide
- **[NEW_FEATURES_v0.8.md](NEW_FEATURES_v0.8.md)** - v0.8.0 feature guide
- **[SERVER_COMPATIBILITY.md](SERVER_COMPATIBILITY.md)** - Server status
- **[DEPLOYMENT_STATUS.md](DEPLOYMENT_STATUS.md)** - Complete status

---

## ğŸ”„ Version History

### v0.8.1 (January 12, 2025)
- Added diagnostics tool
- Created troubleshooting guide
- Improved error handling

### v0.8.0 (January 10, 2025)
- Change tracking system
- Collaborative undo/redo
- Task management
- Team chat
- Multi-scene support

### v0.7.0 (Previous)
- Enhanced keyframe sync
- Auto-update system
- Scene synchronization

---

**Status**: READY FOR DEPLOYMENT ğŸš€

**Package**: `multi_user-0.8.1.zip` (8.9 MB)

**Compatible**: Blender 4.3.0 or later

**Server**: No changes required (replication 0.9.10)
